// Generated by HLC 4.3.4 (HL v5)
#define HLC_BOOT
#include <hlc.h>
#include <sys/thread/_Thread/HaxeThread.h>
#include <hl/natives.h>
extern sys__thread___Thread__$HaxeThread g$_sys_thread__Thread_HaxeThread;
extern hl_type t$sys_thread__Thread_HaxeThread;
void sys_thread__Thread_HaxeThread_new(sys__thread___Thread__HaxeThread,hl_thread*);
int hl_types_ArrayObj_push(hl__types__ArrayObj,vdynamic*);

sys__thread___Thread__HaxeThread sys_thread__Thread_HaxeThread_current() {
	sys__thread___Thread__HaxeThread r4, r11;
	hl__types__ArrayObj r9;
	hl_thread *r0, *r2, *r3;
	hl_mutex *r7;
	sys__thread___Thread__$HaxeThread r5;
	vdynamic *r6;
	varray *r12;
	int r8, r10;
	r0 = hl_thread_current();
	r5 = (sys__thread___Thread__$HaxeThread)g$_sys_thread__Thread_HaxeThread;
	r4 = r5->mainThread;
	if( r4 == NULL ) hl_null_access();
	r3 = r4->handle;
	if( r0 != r3 ) goto label$ca28e11_1_9;
	r5 = (sys__thread___Thread__$HaxeThread)g$_sys_thread__Thread_HaxeThread;
	r4 = r5->mainThread;
	return r4;
	label$ca28e11_1_9:
	r5 = (sys__thread___Thread__$HaxeThread)g$_sys_thread__Thread_HaxeThread;
	r7 = r5->threadsMutex;
	hl_mutex_acquire(r7);
	r4 = NULL;
	r8 = 0;
	r5 = (sys__thread___Thread__$HaxeThread)g$_sys_thread__Thread_HaxeThread;
	r9 = r5->threads;
	label$ca28e11_1_16:
	if( r9 == NULL ) hl_null_access();
	r10 = r9->length;
	if( r8 >= r10 ) goto label$ca28e11_1_34;
	r10 = r9->length;
	if( ((unsigned)r8) < ((unsigned)r10) ) goto label$ca28e11_1_24;
	r11 = NULL;
	goto label$ca28e11_1_27;
	label$ca28e11_1_24:
	r12 = r9->array;
	r6 = ((vdynamic**)(r12 + 1))[r8];
	r11 = (sys__thread___Thread__HaxeThread)r6;
	label$ca28e11_1_27:
	++r8;
	if( r11 == NULL ) hl_null_access();
	r2 = r11->handle;
	if( r2 != r0 ) goto label$ca28e11_1_33;
	r4 = r11;
	goto label$ca28e11_1_34;
	label$ca28e11_1_33:
	goto label$ca28e11_1_16;
	label$ca28e11_1_34:
	if( r4 ) goto label$ca28e11_1_42;
	r11 = (sys__thread___Thread__HaxeThread)hl_alloc_obj(&t$sys_thread__Thread_HaxeThread);
	sys_thread__Thread_HaxeThread_new(r11,r0);
	r4 = r11;
	r5 = (sys__thread___Thread__$HaxeThread)g$_sys_thread__Thread_HaxeThread;
	r9 = r5->threads;
	if( r9 == NULL ) hl_null_access();
	r8 = hl_types_ArrayObj_push(r9,((vdynamic*)r11));
	label$ca28e11_1_42:
	r5 = (sys__thread___Thread__$HaxeThread)g$_sys_thread__Thread_HaxeThread;
	r7 = r5->threadsMutex;
	hl_mutex_release(r7);
	return r4;
}

void sys_thread__Thread_HaxeThread_new(sys__thread___Thread__HaxeThread r0,hl_thread* r1) {
	r0->handle = r1;
	return;
}

