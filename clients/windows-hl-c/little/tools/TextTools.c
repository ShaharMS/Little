// Generated by HLC 4.3.4 (HL v5)
#define HLC_BOOT
#include <hlc.h>
#include <little/tools/TextTools.h>
extern hl_type t$String;
extern hl_type t$_dyn;
int String_lastIndexOf(String,String,vdynamic*);
extern hl_type t$_i32;
String String_substring(String,int,vdynamic*);
String String___add__(String,String);
bool StringTools_endsWith(String,String);
int String_indexOf(String,String,vdynamic*);
extern String s$;
extern hl_type t$fun_b61c420;
extern hl_type t$fun_9a38e57;
void hl_types_ArrayObj_sort(hl__types__ArrayObj,vclosure*);
bool little_tools_TextTools_contains(String,String);
String little_tools_TextTools_replace(String,String,String);
String StringTools_replace(String,String,String);

int little_tools_TextTools_sortByLength__$2(vclosure* r0,vdynamic* r1,vdynamic* r2) {
	String r3, r4;
	int r5;
	r3 = (String)hl_dyn_castp(&r1,&t$_dyn,&t$String);
	r4 = (String)hl_dyn_castp(&r2,&t$_dyn,&t$String);
	r5 = r0->hasValue ? ((int (*)(vdynamic*,String,String))r0->fun)((vdynamic*)r0->value,r3,r4) : ((int (*)(String,String))r0->fun)(r3,r4);
	return r5;
}

String little_tools_TextTools_replaceLast(String r0,String r1,String r2) {
	String r4, r5;
	vdynamic *r6;
	int r3, r7, r8;
	if( r0 == NULL ) hl_null_access();
	r6 = NULL;
	r3 = String_lastIndexOf(r0,r1,r6);
	r8 = -1;
	if( r3 != r8 ) goto label$c015c8f_2_6;
	return r0;
	label$c015c8f_2_6:
	r7 = 0;
	r6 = hl_alloc_dynamic(&t$_i32);
	r6->v.i = r3;
	r4 = String_substring(r0,r7,r6);
	r4 = String___add__(r4,r2);
	if( r1 == NULL ) hl_null_access();
	r8 = r1->length;
	r7 = r3 + r8;
	r6 = NULL;
	r5 = String_substring(r0,r7,r6);
	r4 = String___add__(r4,r5);
	return r4;
}

String little_tools_TextTools_replaceIfLast(String r0,String r1,String r2) {
	String r4;
	bool r3;
	r3 = StringTools_endsWith(r0,r1);
	if( !r3 ) goto label$c015c8f_3_4;
	r4 = little_tools_TextTools_replaceLast(r0,r1,r2);
	return r4;
	label$c015c8f_3_4:
	return r0;
}

String little_tools_TextTools_replaceFirst(String r0,String r1,String r2) {
	String r4, r5;
	vdynamic *r6;
	int r3, r7, r8;
	if( r0 == NULL ) hl_null_access();
	r6 = NULL;
	r3 = String_indexOf(r0,r1,r6);
	r8 = -1;
	if( r3 != r8 ) goto label$c015c8f_4_6;
	return r0;
	label$c015c8f_4_6:
	r7 = 0;
	r6 = hl_alloc_dynamic(&t$_i32);
	r6->v.i = r3;
	r4 = String_substring(r0,r7,r6);
	r4 = String___add__(r4,r2);
	if( r1 == NULL ) hl_null_access();
	r8 = r1->length;
	r7 = r3 + r8;
	r6 = NULL;
	r5 = String_substring(r0,r7,r6);
	r4 = String___add__(r4,r5);
	return r4;
}

String little_tools_TextTools_multiply(String r0,int r1) {
	String r2, r5;
	int r3, r4;
	r2 = r0;
	r4 = 0;
	if( r4 < r1 ) goto label$c015c8f_5_5;
	r5 = (String)s$;
	return r5;
	label$c015c8f_5_5:
	--r1;
	r3 = 0;
	if( r3 >= r1 ) goto label$c015c8f_5_12;
	r5 = String___add__(r0,r2);
	r0 = r5;
	goto label$c015c8f_5_5;
	label$c015c8f_5_12:
	return r0;
}

int little_tools_TextTools_sortByLength__$1(String r0,String r1) {
	int r2, r3;
	if( r0 == NULL ) hl_null_access();
	r2 = r0->length;
	if( r1 == NULL ) hl_null_access();
	r3 = r1->length;
	r2 = r2 - r3;
	return r2;
}

hl__types__ArrayObj little_tools_TextTools_sortByLength(hl__types__ArrayObj r0) {
	vclosure *r2, *r3;
	static vclosure cl$0 = { &t$fun_b61c420, little_tools_TextTools_sortByLength__$1, 0 };
	if( r0 == NULL ) hl_null_access();
	r2 = &cl$0;
	if( r2 ) goto label$c015c8f_7_5;
	r3 = NULL;
	goto label$c015c8f_7_6;
	label$c015c8f_7_5:
	r3 = hl_alloc_closure_ptr(&t$fun_9a38e57,little_tools_TextTools_sortByLength__$2,r2);
	label$c015c8f_7_6:
	hl_types_ArrayObj_sort(r0,r3);
	return r0;
}

int little_tools_TextTools_countOccurrencesOf(String r0,String r1) {
	String r4, r5;
	bool r3;
	int r2;
	r2 = 0;
	label$c015c8f_8_1:
	r3 = little_tools_TextTools_contains(r0,r1);
	if( !r3 ) goto label$c015c8f_8_9;
	++r2;
	r5 = (String)s$;
	r4 = little_tools_TextTools_replaceFirst(r0,r1,r5);
	r0 = r4;
	goto label$c015c8f_8_1;
	label$c015c8f_8_9:
	return r2;
}

bool little_tools_TextTools_contains(String r0,String r1) {
	bool r2;
	vdynamic *r4;
	int r3, r5;
	if( r0 ) goto label$c015c8f_9_3;
	r2 = false;
	return r2;
	label$c015c8f_9_3:
	if( r0 == NULL ) hl_null_access();
	r4 = NULL;
	r3 = String_indexOf(r0,r1,r4);
	r5 = -1;
	if( r3 != r5 ) goto label$c015c8f_9_10;
	r2 = false;
	goto label$c015c8f_9_11;
	label$c015c8f_9_10:
	r2 = true;
	label$c015c8f_9_11:
	return r2;
}

String little_tools_TextTools_remove(String r0,String r1) {
	String r2, r3;
	r3 = (String)s$;
	r2 = little_tools_TextTools_replace(r0,r1,r3);
	return r2;
}

String little_tools_TextTools_replace(String r0,String r1,String r2) {
	String r3;
	if( !r1 ) goto label$c015c8f_11_2;
	if( r2 ) goto label$c015c8f_11_3;
	label$c015c8f_11_2:
	return r0;
	label$c015c8f_11_3:
	r3 = StringTools_replace(r0,r1,r2);
	return r3;
}

bool little_tools_TextTools_containsAny(String r0,hl__types__ArrayObj r1) {
	String r5;
	bool r9;
	vdynamic *r6, *r8;
	varray *r7;
	int r2, r3, r4;
	r2 = 0;
	label$c015c8f_12_1:
	if( r1 == NULL ) hl_null_access();
	r4 = r1->length;
	if( r2 >= r4 ) goto label$c015c8f_12_21;
	r4 = r1->length;
	if( ((unsigned)r2) < ((unsigned)r4) ) goto label$c015c8f_12_9;
	r5 = NULL;
	goto label$c015c8f_12_12;
	label$c015c8f_12_9:
	r7 = r1->array;
	r6 = ((vdynamic**)(r7 + 1))[r2];
	r5 = (String)r6;
	label$c015c8f_12_12:
	++r2;
	if( r0 == NULL ) hl_null_access();
	r8 = NULL;
	r3 = String_indexOf(r0,r5,r8);
	r4 = -1;
	if( r3 == r4 ) goto label$c015c8f_12_20;
	r9 = true;
	return r9;
	label$c015c8f_12_20:
	goto label$c015c8f_12_1;
	label$c015c8f_12_21:
	r9 = false;
	return r9;
}

