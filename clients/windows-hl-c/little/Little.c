// Generated by HLC 4.3.4 (HL v5)
#define HLC_BOOT
#include <hlc.h>
#include <little/Little.h>
#include <little/tools/PrepareRun.h>
#include <little/interpreter/InterpTokens.h>
#include <little/parser/Parser.h>
extern little__$Little g$_little_Little;
vdynamic* vision_ds_Queue_enqueue(vision__ds__Queue,vdynamic*);
extern hl_type t$String;
extern hl_type t$_dyn;
int String___compare(String,vdynamic*);
extern little__tools__$PrepareRun g$_little_tools_PrepareRun;
void little_tools_PrepareRun_addTypes(void);
void little_tools_PrepareRun_addSigns(void);
void little_tools_PrepareRun_addFunctions(void);
void little_tools_PrepareRun_addConditions(void);
void little_tools_PrepareRun_addProps(void);
extern little__parser__$Parser g$_little_parser_Parser;
hl__types__ArrayObj little_lexer_Lexer_lex(String);
hl__types__ArrayObj little_interpreter_Interpreter_convert(hl__types__ArrayObj);
venum* little_interpreter_Interpreter_run(hl__types__ArrayObj,bool*);
vvirtual* vision_ds_Queue_iterator(vision__ds__Queue);
extern hl_type t$vrt_0a81a53;
extern hl_type t$fun_bf7849e;
extern hl_type t$fun_820f49a;
#include <little/parser/ParserTokens.h>
String little_tools_PrettyPrinter_stringifyParser(hl__types__ArrayObj,venum*);
extern hl_type t$little_interpreter_Runtime;
void little_interpreter_Runtime_new(little__interpreter__Runtime);
void little_interpreter_memory_Memory_reset(little__interpreter__memory__Memory);
extern hl_type t$vision_ds_Queue;
void vision_ds_Queue_new(vision__ds__Queue);

void little_Little_loadModule(String r0,String r1,bool* r2,bool* r3) {
	String r10, r14;
	hl__types__ArrayObj r18;
	little__$Little r7;
	venum *r17;
	bool r4, r5, r8, r15;
	little__tools__$PrepareRun r16;
	little__interpreter__Runtime r6;
	vclosure *r19;
	little__parser__$Parser r20;
	vdynamic *r12;
	vision__ds__Queue r13;
	int r9;
	if( r2 ) goto label$c0fc762_1_3;
	r4 = false;
	goto label$c0fc762_1_4;
	label$c0fc762_1_3:
	r4 = *r2;
	label$c0fc762_1_4:
	if( r3 ) goto label$c0fc762_1_7;
	r5 = false;
	goto label$c0fc762_1_8;
	label$c0fc762_1_7:
	r5 = *r3;
	label$c0fc762_1_8:
	r7 = (little__$Little)g$_little_Little;
	r6 = r7->runtime;
	if( r6 == NULL ) hl_null_access();
	r8 = false;
	r6->errorThrown = r8;
	r7 = (little__$Little)g$_little_Little;
	r6 = r7->runtime;
	if( r6 == NULL ) hl_null_access();
	r9 = 0;
	r6->line = r9;
	r7 = (little__$Little)g$_little_Little;
	r6 = r7->runtime;
	if( r6 == NULL ) hl_null_access();
	r6->module = r1;
	if( !r5 ) goto label$c0fc762_1_32;
	r7 = (little__$Little)g$_little_Little;
	r13 = r7->queue;
	if( r13 == NULL ) hl_null_access();
	r12 = vision_ds_Queue_enqueue(r13,((vdynamic*)r0));
	r10 = (String)r12;
	r14 = (String)hl_dyn_castp(&r12,&t$_dyn,&t$String);
	if( r10 == r14 || (r10 && r14 && String___compare(r10,(vdynamic*)r14) == 0) ) goto label$c0fc762_1_31;
	hl_assert();
	label$c0fc762_1_31:
	goto label$c0fc762_1_54;
	label$c0fc762_1_32:
	r7 = (little__$Little)g$_little_Little;
	r8 = r7->debug;
	r7 = (little__$Little)g$_little_Little;
	r7->debug = r4;
	r16 = (little__tools__$PrepareRun)g$_little_tools_PrepareRun;
	r15 = r16->prepared;
	if( r15 ) goto label$c0fc762_1_44;
	little_tools_PrepareRun_addTypes();
	little_tools_PrepareRun_addSigns();
	little_tools_PrepareRun_addFunctions();
	little_tools_PrepareRun_addConditions();
	little_tools_PrepareRun_addProps();
	label$c0fc762_1_44:
	r20 = (little__parser__$Parser)g$_little_parser_Parser;
	r19 = r20->parse;
	if( r19 == NULL ) hl_null_access();
	r18 = little_lexer_Lexer_lex(r0);
	r18 = r19->hasValue ? ((hl__types__ArrayObj (*)(vdynamic*,hl__types__ArrayObj))r19->fun)((vdynamic*)r19->value,r18) : ((hl__types__ArrayObj (*)(hl__types__ArrayObj))r19->fun)(r18);
	r18 = little_interpreter_Interpreter_convert(r18);
	r2 = NULL;
	r17 = little_interpreter_Interpreter_run(r18,r2);
	r7 = (little__$Little)g$_little_Little;
	r7->debug = r8;
	label$c0fc762_1_54:
	return;
}

void little_Little_run(String r0,vdynamic* r1) {
	bool *r20;
	String r9, r13;
	hl__types__ArrayObj r17;
	vvirtual *r14, *r15;
	little__$Little r5;
	venum *r16;
	bool r4, r6;
	little__tools__$PrepareRun r7;
	little__interpreter__Runtime r8;
	little__KeywordConfig r10;
	vclosure *r18;
	little__parser__$Parser r19;
	vdynamic *r2;
	vision__ds__Queue r12;
	int r11;
	hl_trap_ctx trap$0;
	hl_trap(trap$0,r2,label$c0fc762_2_64);
	r5 = (little__$Little)g$_little_Little;
	r4 = r5->debug;
	if( !r1 ) goto label$c0fc762_2_7;
	r6 = r1 ? r1->v.b : 0;
	r5 = (little__$Little)g$_little_Little;
	r5->debug = r6;
	label$c0fc762_2_7:
	r7 = (little__tools__$PrepareRun)g$_little_tools_PrepareRun;
	r6 = r7->prepared;
	if( r6 ) goto label$c0fc762_2_15;
	little_tools_PrepareRun_addTypes();
	little_tools_PrepareRun_addSigns();
	little_tools_PrepareRun_addFunctions();
	little_tools_PrepareRun_addConditions();
	little_tools_PrepareRun_addProps();
	label$c0fc762_2_15:
	r5 = (little__$Little)g$_little_Little;
	r8 = r5->runtime;
	if( r8 == NULL ) hl_null_access();
	r5 = (little__$Little)g$_little_Little;
	r10 = r5->keywords;
	if( r10 == NULL ) hl_null_access();
	r9 = r10->MAIN_MODULE_NAME;
	r8->module = r9;
	r5 = (little__$Little)g$_little_Little;
	r8 = r5->runtime;
	if( r8 == NULL ) hl_null_access();
	r6 = false;
	r8->errorThrown = r6;
	r5 = (little__$Little)g$_little_Little;
	r8 = r5->runtime;
	if( r8 == NULL ) hl_null_access();
	r11 = 0;
	r8->line = r11;
	r5 = (little__$Little)g$_little_Little;
	r12 = r5->queue;
	if( r12 == NULL ) hl_null_access();
	r2 = vision_ds_Queue_enqueue(r12,((vdynamic*)r0));
	r9 = (String)r2;
	r13 = (String)hl_dyn_castp(&r2,&t$_dyn,&t$String);
	if( r9 == r13 || (r9 && r13 && String___compare(r9,(vdynamic*)r13) == 0) ) goto label$c0fc762_2_41;
	hl_assert();
	label$c0fc762_2_41:
	r5 = (little__$Little)g$_little_Little;
	r12 = r5->queue;
	if( r12 == NULL ) hl_null_access();
	r14 = vision_ds_Queue_iterator(r12);
	r15 = hl_to_virtual(&t$vrt_0a81a53,(vdynamic*)r14);
	label$c0fc762_2_46:
	if( r15 == NULL ) hl_null_access();
	if( hl_vfields(r15)[0] ) r6 = ((bool (*)(vdynamic*))hl_vfields(r15)[0])(r15->value); else {
		vdynamic ret;
		hl_dyn_call_obj(r15->value,&t$fun_bf7849e,407283053/*hasNext*/,NULL,&ret);
		r6 = (bool)ret.v.i;
	}
	if( !r6 ) goto label$c0fc762_2_60;
	if( hl_vfields(r15)[1] ) r9 = ((String (*)(vdynamic*))hl_vfields(r15)[1])(r15->value); else {
		r9 = (String)hl_dyn_call_obj(r15->value,&t$fun_820f49a,151160317/*next*/,NULL,NULL);
	}
	r19 = (little__parser__$Parser)g$_little_parser_Parser;
	r18 = r19->parse;
	if( r18 == NULL ) hl_null_access();
	r17 = little_lexer_Lexer_lex(r9);
	r17 = r18->hasValue ? ((hl__types__ArrayObj (*)(vdynamic*,hl__types__ArrayObj))r18->fun)((vdynamic*)r18->value,r17) : ((hl__types__ArrayObj (*)(hl__types__ArrayObj))r18->fun)(r17);
	r17 = little_interpreter_Interpreter_convert(r17);
	r20 = NULL;
	r16 = little_interpreter_Interpreter_run(r17,r20);
	goto label$c0fc762_2_46;
	label$c0fc762_2_60:
	if( !r1 ) goto label$c0fc762_2_63;
	r5 = (little__$Little)g$_little_Little;
	r5->debug = r4;
	label$c0fc762_2_63:
	hl_endtrap(trap$0);
	label$c0fc762_2_64:
	return;
}

hl__types__ArrayObj little_Little_compile(String r0) {
	hl__types__ArrayObj r1;
	vclosure *r2;
	little__parser__$Parser r3;
	r3 = (little__parser__$Parser)g$_little_parser_Parser;
	r2 = r3->parse;
	if( r2 == NULL ) hl_null_access();
	r1 = little_lexer_Lexer_lex(r0);
	r1 = r2->hasValue ? ((hl__types__ArrayObj (*)(vdynamic*,hl__types__ArrayObj))r2->fun)((vdynamic*)r2->value,r1) : ((hl__types__ArrayObj (*)(hl__types__ArrayObj))r2->fun)(r1);
	r1 = little_interpreter_Interpreter_convert(r1);
	return r1;
}

String little_Little_format(String r0) {
	String r1;
	hl__types__ArrayObj r2;
	venum *r5;
	vclosure *r3;
	little__parser__$Parser r4;
	r4 = (little__parser__$Parser)g$_little_parser_Parser;
	r3 = r4->parse;
	if( r3 == NULL ) hl_null_access();
	r2 = little_lexer_Lexer_lex(r0);
	r2 = r3->hasValue ? ((hl__types__ArrayObj (*)(vdynamic*,hl__types__ArrayObj))r3->fun)((vdynamic*)r3->value,r2) : ((hl__types__ArrayObj (*)(hl__types__ArrayObj))r3->fun)(r2);
	r5 = NULL;
	r1 = little_tools_PrettyPrinter_stringifyParser(r2,r5);
	return r1;
}

void little_Little_reset() {
	little__$Little r2;
	little__interpreter__memory__Memory r3;
	little__interpreter__Runtime r0;
	vision__ds__Queue r4;
	r0 = (little__interpreter__Runtime)hl_alloc_obj(&t$little_interpreter_Runtime);
	little_interpreter_Runtime_new(r0);
	r2 = (little__$Little)g$_little_Little;
	r2->runtime = r0;
	r2 = (little__$Little)g$_little_Little;
	r3 = r2->memory;
	if( r3 == NULL ) hl_null_access();
	little_interpreter_memory_Memory_reset(r3);
	r4 = (vision__ds__Queue)hl_alloc_obj(&t$vision_ds_Queue);
	vision_ds_Queue_new(r4);
	r2 = (little__$Little)g$_little_Little;
	r2->queue = r4;
	return;
}

