// Generated by HLC 4.3.4 (HL v5)
#define HLC_BOOT
#include <hlc.h>
#include <little/interpreter/Runtime.h>
#include <little/Little.h>
extern String s$Interpreter;
String Std_string(vdynamic*);
String Type_enumConstructor(vdynamic*);
String little_tools_TextTools_remove(String,String);
String String_substring(String,int,vdynamic*);
extern String s$9371d7a;
extern String s$;
String little_tools_TextTools_replaceLast(String,String,String);
extern little__$Little g$_little_Little;
String String_toUpperCase(String);
extern String s$e265492;
String String___add__(String,String);
extern String s$ERROR_Module_;
extern String s$_Line_;
#include <hl/natives.h>
String String___alloc__(vbyte*,int);
extern String s$b7d21f4;
extern String s$68b329d;
extern hl_type t$String;
hl__types__ArrayObj hl_types_ArrayObj_alloc(varray*);
extern hl_type t$vrt_f317fe3;
extern String s$_Called_from_Module_;
extern hl_type t$_i32;
extern String s$_part_;
extern String s$7466d79;
extern hl_type t$little_interpreter_InterpTokens;
String little_tools_PrettyPrinter_stringifyInterpreter(hl__types__ArrayObj,venum*);
int hl_types_ArrayObj_push(hl__types__ArrayObj,vdynamic*);
String hl_types_ArrayObj_join(hl__types__ArrayObj,String);
void hl_types_ArrayObj_unshift(hl__types__ArrayObj,vdynamic*);
int little_tools__Layer_Layer_Impl__getIndexOf(String);
extern String s$Module_;
#include <little/KeywordConfig.h>
extern hl_type t$little_interpreter_StdOut;
void little_interpreter_StdOut_new(little__interpreter__StdOut);
extern hl_type t$fun_681d69b;
extern hl_type t$fun_b3e6601;
extern hl_type t$fun_6a5047a;
extern hl_type t$fun_b8bbe41;
extern hl_type t$fun_715d8bf;
extern hl_type t$fun_46da1f1;
extern hl_type t$fun_5281280;
extern hl_type t$fun_7b48b4f;
extern hl_type t$fun_6047e2e;
extern hl_type t$fun_8249ca6;

venum* little_interpreter_Runtime_throwError(little__interpreter__Runtime r0,venum* r1,String r2) {
	String r3, r5, r7, r10, r13, r17;
	vvirtual *r25;
	hl__types__ArrayObj r19, r22, r27;
	little__$Little r12;
	hl_type *r21;
	venum *r6;
	bool r11;
	vclosure *r28;
	little__interpreter__StdOut r16, r18;
	int *r14;
	vdynamic *r9, *r26;
	varray *r20;
	vbyte *r15;
	int r8, r23, r24;
	if( r2 ) goto label$c31901e_1_3;
	r3 = (String)s$Interpreter;
	r2 = r3;
	label$c31901e_1_3:
	r3 = r0->module;
	r5 = Std_string(((vdynamic*)r1));
	r7 = Type_enumConstructor(((vdynamic*)r1));
	r5 = little_tools_TextTools_remove(r5,r7);
	if( r5 == NULL ) hl_null_access();
	r8 = 1;
	r9 = NULL;
	r5 = String_substring(r5,r8,r9);
	r7 = (String)s$9371d7a;
	r10 = (String)s$;
	r5 = little_tools_TextTools_replaceLast(r5,r7,r10);
	r7 = (String)s$;
	r12 = (little__$Little)g$_little_Little;
	r11 = r12->debug;
	if( !r11 ) goto label$c31901e_1_23;
	if( r2 == NULL ) hl_null_access();
	r10 = String_toUpperCase(r2);
	r13 = (String)s$e265492;
	r10 = String___add__(r10,r13);
	goto label$c31901e_1_24;
	label$c31901e_1_23:
	r10 = (String)s$;
	label$c31901e_1_24:
	r7 = String___add__(r7,r10);
	r10 = (String)s$ERROR_Module_;
	r7 = String___add__(r7,r10);
	r10 = r0->module;
	r7 = String___add__(r7,r10);
	r10 = (String)s$_Line_;
	r7 = String___add__(r7,r10);
	r8 = r0->line;
	r14 = &r8;
	r15 = hl_itos(r8,r14);
	r10 = String___alloc__(r15,r8);
	r7 = String___add__(r7,r10);
	r10 = (String)s$b7d21f4;
	r7 = String___add__(r7,r10);
	r7 = String___add__(r7,r5);
	r16 = r0->stdout;
	if( r16 == NULL ) hl_null_access();
	r10 = r16->output;
	r13 = (String)s$68b329d;
	r13 = String___add__(r13,r7);
	r17 = (String)s$68b329d;
	r13 = String___add__(r13,r17);
	r10 = String___add__(r10,r13);
	r16->output = r10;
	r16 = r0->stdout;
	if( r16 == NULL ) hl_null_access();
	r10 = r16->output;
	r21 = &t$String;
	r8 = 0;
	r20 = hl_alloc_array(r21,r8);
	r19 = hl_types_ArrayObj_alloc(r20);
	r8 = 0;
	r22 = r0->callStack;
	label$c31901e_1_57:
	if( r22 == NULL ) hl_null_access();
	r24 = r22->length;
	if( r8 >= r24 ) goto label$c31901e_1_96;
	r24 = r22->length;
	if( ((unsigned)r8) < ((unsigned)r24) ) goto label$c31901e_1_65;
	r25 = NULL;
	goto label$c31901e_1_68;
	label$c31901e_1_65:
	r20 = r22->array;
	r26 = ((vdynamic**)(r20 + 1))[r8];
	r25 = hl_to_virtual(&t$vrt_f317fe3,(vdynamic*)r26);
	label$c31901e_1_68:
	++r8;
	if( r19 == NULL ) hl_null_access();
	r13 = (String)s$_Called_from_Module_;
	if( r25 == NULL ) hl_null_access();
	r17 = hl_vfields(r25)[2] ? (*(String*)(hl_vfields(r25)[2])) : (String)hl_dyn_getp(r25->value,-523029465/*module*/,&t$String);
	r13 = String___add__(r13,r17);
	r17 = (String)s$_Line_;
	r13 = String___add__(r13,r17);
	r23 = hl_vfields(r25)[0] ? (*(int*)(hl_vfields(r25)[0])) : (int)hl_dyn_geti(r25->value,129177854/*line*/,&t$_i32);
	r14 = &r23;
	r15 = hl_itos(r23,r14);
	r17 = String___alloc__(r15,r23);
	r13 = String___add__(r13,r17);
	r17 = (String)s$_part_;
	r13 = String___add__(r13,r17);
	r23 = hl_vfields(r25)[1] ? (*(int*)(hl_vfields(r25)[1])) : (int)hl_dyn_geti(r25->value,-411357064/*linePart*/,&t$_i32);
	r14 = &r23;
	r15 = hl_itos(r23,r14);
	r17 = String___alloc__(r15,r23);
	r13 = String___add__(r13,r17);
	r17 = (String)s$7466d79;
	r13 = String___add__(r13,r17);
	r27 = NULL;
	r6 = hl_vfields(r25)[3] ? (*(venum**)(hl_vfields(r25)[3])) : (venum*)hl_dyn_getp(r25->value,338395897/*token*/,&t$little_interpreter_InterpTokens);
	r17 = little_tools_PrettyPrinter_stringifyInterpreter(r27,r6);
	r13 = String___add__(r13,r17);
	r23 = hl_types_ArrayObj_push(r19,((vdynamic*)r13));
	goto label$c31901e_1_57;
	label$c31901e_1_96:
	if( r16 == NULL ) hl_null_access();
	if( r19 == NULL ) hl_null_access();
	r17 = (String)s$68b329d;
	r17 = hl_types_ArrayObj_join(r19,r17);
	r13 = String___add__(r10,r17);
	r16->output = r13;
	r18 = r0->stdout;
	if( r18 == NULL ) hl_null_access();
	r22 = r18->stdoutTokens;
	if( r22 == NULL ) hl_null_access();
	r8 = hl_types_ArrayObj_push(r22,((vdynamic*)r1));
	r22 = r0->callStack;
	if( r22 == NULL ) hl_null_access();
	r25 = hl_alloc_virtual(&t$vrt_f317fe3);
	r13 = r0->module;
	if( hl_vfields(r25)[2] ) *(String*)(hl_vfields(r25)[2]) = (String)r13; else hl_dyn_setp(r25->value,-523029465/*module*/,&t$String,r13);
	r8 = r0->line;
	if( hl_vfields(r25)[0] ) *(int*)(hl_vfields(r25)[0]) = (int)r8; else hl_dyn_seti(r25->value,129177854/*line*/,&t$_i32,r8);
	r8 = r0->linePart;
	if( hl_vfields(r25)[1] ) *(int*)(hl_vfields(r25)[1]) = (int)r8; else hl_dyn_seti(r25->value,-411357064/*linePart*/,&t$_i32,r8);
	if( hl_vfields(r25)[3] ) *(venum**)(hl_vfields(r25)[3]) = (venum*)r1; else hl_dyn_setp(r25->value,338395897/*token*/,&t$little_interpreter_InterpTokens,r1);
	hl_types_ArrayObj_unshift(r22,((vdynamic*)r25));
	r8 = little_tools__Layer_Layer_Impl__getIndexOf(r2);
	r0->exitCode = r8;
	r0->errorToken = r1;
	r11 = true;
	r0->errorThrown = r11;
	r8 = 0;
	r22 = r0->onErrorThrown;
	label$c31901e_1_125:
	if( r22 == NULL ) hl_null_access();
	r24 = r22->length;
	if( r8 >= r24 ) goto label$c31901e_1_141;
	r24 = r22->length;
	if( ((unsigned)r8) < ((unsigned)r24) ) goto label$c31901e_1_133;
	r28 = NULL;
	goto label$c31901e_1_136;
	label$c31901e_1_133:
	r20 = r22->array;
	r26 = ((vdynamic**)(r20 + 1))[r8];
	r28 = (vclosure*)r26;
	label$c31901e_1_136:
	++r8;
	if( r28 == NULL ) hl_null_access();
	r23 = r0->line;
	r28->hasValue ? ((void (*)(vdynamic*,String,int,String))r28->fun)((vdynamic*)r28->value,r3,r23,r5) : ((void (*)(String,int,String))r28->fun)(r3,r23,r5);
	goto label$c31901e_1_125;
	label$c31901e_1_141:
	hl_throw((vdynamic*)r1);
}

void little_interpreter_Runtime___print(little__interpreter__Runtime r0,String r1,venum* r2) {
	String r4, r5, r6, r9;
	hl__types__ArrayObj r13;
	little__$Little r8;
	bool r7;
	little__interpreter__StdOut r3;
	int *r11;
	vbyte *r12;
	int r10;
	r3 = r0->stdout;
	if( r3 == NULL ) hl_null_access();
	r4 = r3->output;
	r5 = (String)s$68b329d;
	r8 = (little__$Little)g$_little_Little;
	r7 = r8->debug;
	if( !r7 ) goto label$c31901e_2_13;
	r6 = (String)s$Interpreter;
	if( r6 == NULL ) hl_null_access();
	r6 = String_toUpperCase(r6);
	r9 = (String)s$e265492;
	r6 = String___add__(r6,r9);
	goto label$c31901e_2_14;
	label$c31901e_2_13:
	r6 = (String)s$;
	label$c31901e_2_14:
	r5 = String___add__(r5,r6);
	r6 = (String)s$Module_;
	r5 = String___add__(r5,r6);
	r6 = r0->module;
	r5 = String___add__(r5,r6);
	r6 = (String)s$_Line_;
	r5 = String___add__(r5,r6);
	r10 = r0->line;
	r11 = &r10;
	r12 = hl_itos(r10,r11);
	r6 = String___alloc__(r12,r10);
	r5 = String___add__(r5,r6);
	r6 = (String)s$b7d21f4;
	r5 = String___add__(r5,r6);
	r5 = String___add__(r5,r1);
	r4 = String___add__(r4,r5);
	r3->output = r4;
	r3 = r0->stdout;
	if( r3 == NULL ) hl_null_access();
	r13 = r3->stdoutTokens;
	if( r13 == NULL ) hl_null_access();
	r10 = hl_types_ArrayObj_push(r13,((vdynamic*)r2));
	return;
}

void little_interpreter_Runtime_new(little__interpreter__Runtime r0) {
	String r8;
	little__$Little r10;
	hl__types__ArrayObj r1;
	venum *r11;
	hl_type *r3;
	bool r7;
	little__KeywordConfig r9;
	little__interpreter__StdOut r5;
	int r4;
	varray *r2;
	r3 = &t$vrt_f317fe3;
	r4 = 0;
	r2 = hl_alloc_array(r3,r4);
	r1 = hl_types_ArrayObj_alloc(r2);
	r0->callStack = r1;
	r5 = (little__interpreter__StdOut)hl_alloc_obj(&t$little_interpreter_StdOut);
	little_interpreter_StdOut_new(r5);
	r0->stdout = r5;
	r3 = &t$fun_681d69b;
	r4 = 0;
	r2 = hl_alloc_array(r3,r4);
	r1 = hl_types_ArrayObj_alloc(r2);
	r0->onTypeCast = r1;
	r3 = &t$fun_b3e6601;
	r4 = 0;
	r2 = hl_alloc_array(r3,r4);
	r1 = hl_types_ArrayObj_alloc(r2);
	r0->onFieldDeclared = r1;
	r3 = &t$fun_6a5047a;
	r4 = 0;
	r2 = hl_alloc_array(r3,r4);
	r1 = hl_types_ArrayObj_alloc(r2);
	r0->onConditionCalled = r1;
	r3 = &t$fun_b8bbe41;
	r4 = 0;
	r2 = hl_alloc_array(r3,r4);
	r1 = hl_types_ArrayObj_alloc(r2);
	r0->onFunctionCalled = r1;
	r3 = &t$fun_715d8bf;
	r4 = 0;
	r2 = hl_alloc_array(r3,r4);
	r1 = hl_types_ArrayObj_alloc(r2);
	r0->onWriteValue = r1;
	r3 = &t$fun_46da1f1;
	r4 = 0;
	r2 = hl_alloc_array(r3,r4);
	r1 = hl_types_ArrayObj_alloc(r2);
	r0->onErrorThrown = r1;
	r3 = &t$fun_5281280;
	r4 = 0;
	r2 = hl_alloc_array(r3,r4);
	r1 = hl_types_ArrayObj_alloc(r2);
	r0->onTokenInterpreted = r1;
	r3 = &t$fun_7b48b4f;
	r4 = 0;
	r2 = hl_alloc_array(r3,r4);
	r1 = hl_types_ArrayObj_alloc(r2);
	r0->onLineSplit = r1;
	r3 = &t$fun_6047e2e;
	r4 = 0;
	r2 = hl_alloc_array(r3,r4);
	r1 = hl_types_ArrayObj_alloc(r2);
	r0->onModuleChanged = r1;
	r3 = &t$fun_8249ca6;
	r4 = 0;
	r2 = hl_alloc_array(r3,r4);
	r1 = hl_types_ArrayObj_alloc(r2);
	r0->onLineChanged = r1;
	r7 = false;
	r0->errorThrown = r7;
	r4 = 0;
	r0->exitCode = r4;
	r10 = (little__$Little)g$_little_Little;
	r9 = r10->keywords;
	if( r9 == NULL ) hl_null_access();
	r8 = r9->MAIN_MODULE_NAME;
	r0->module = r8;
	r11 = NULL;
	r0->currentToken = r11;
	r4 = 0;
	r0->linePart = r4;
	r4 = 0;
	r0->line = r4;
	return;
}

