// Generated by HLC 4.3.4 (HL v5)
#define HLC_BOOT
#include <hlc.h>
#include <vision/tools/_ImageTools/NeighborsIterator.h>
#include <hl/types/ArrayBytes_Int.h>
#include <vision/ds/_Image/Image_Impl_.h>
#include <haxe/_Int64/Int64_Impl_.h>
#include <vision/exceptions/OutOfBounds.h>
#include <vision/ds/Point2D.h>
#include <hl/natives.h>
hl__types__ArrayBytes_Int hl_types_ArrayBase_allocI32(vbyte*,int);
extern vision__ds___Image__$Image_Impl_ g$_vision_ds__Image_Image_Impl_;
extern haxe___Int64__$Int64_Impl_ g$_haxe__Int64_Int64_Impl_;
extern hl_type t$vision_exceptions_OutOfBounds;
extern hl_type t$vision_ds_Point2D;
void vision_ds_Point2D_new(vision__ds__Point2D,double*,double*);
void vision_exceptions_OutOfBounds_new(vision__exceptions__OutOfBounds,haxe__io__Bytes,vision__ds__Point2D);
int haxe_io_Bytes_get(haxe__io__Bytes,int);

void vision_tools__ImageTools_NeighborsIterator_new(vision__tools___ImageTools__NeighborsIterator r0,haxe__io__Bytes r1,int r2,int r3,int r4,bool* r5) {
	bool r6;
	int r7, r8;
	if( r5 ) goto label$c8be14a_1_3;
	r6 = false;
	goto label$c8be14a_1_4;
	label$c8be14a_1_3:
	r6 = *r5;
	label$c8be14a_1_4:
	r0->image = r1;
	r8 = 1;
	r7 = r4 - r8;
	r8 = 1;
	r7 = r7 >> r8;
	r0->roundedDown = r7;
	r0->x = r2;
	r0->y = r3;
	r0->circular = r6;
	r7 = r0->roundedDown;
	r7 = -r7;
	r0->X = r7;
	r7 = r0->roundedDown;
	r7 = -r7;
	r0->Y = r7;
	return;
}

int vision_tools__ImageTools_NeighborsIterator_next(vision__tools___ImageTools__NeighborsIterator r0) {
	vision__ds___Image__$Image_Impl_ r28;
	vision__ds__Point2D r45;
	int64 r38, r39, r40, r41, r42;
	haxe__io__Bytes r14;
	bool r1, r12, r36;
	hl__types__ArrayBytes_Int r19, r22, r26, r31;
	haxe___Int64__$Int64_Impl_ r43;
	vision__exceptions__OutOfBounds r44;
	double r5, r6, r7, r8, r9, r10, r11, r13;
	double *r46, *r47;
	vbyte *r17;
	int r2, r3, r15, r16, r18, r20, r21, r23, r24, r25, r27, r29, r30, r32, r33, r34, r35, r37;
	label$c8be14a_2_0:
	r1 = true;
	if( !r1 ) goto label$c8be14a_2_44;
	r2 = r0->Y;
	r3 = 1;
	r2 = r2 + r3;
	r0->Y = r2;
	r2 = r0->Y;
	r3 = r0->roundedDown;
	if( r3 >= r2 ) goto label$c8be14a_2_17;
	r2 = r0->roundedDown;
	r2 = -r2;
	r0->Y = r2;
	r2 = r0->X;
	r3 = 1;
	r2 = r2 + r3;
	r0->X = r2;
	label$c8be14a_2_17:
	r1 = r0->circular;
	if( !r1 ) goto label$c8be14a_2_40;
	r2 = r0->X;
	r5 = (double)r2;
	r2 = r0->Y;
	r6 = (double)r2;
	r2 = r0->roundedDown;
	r7 = (double)r2;
	r2 = r0->roundedDown;
	r8 = (double)r2;
	r9 = r7 - r5;
	r10 = r8 - r6;
	r11 = r9 * r9;
	r13 = r10 * r10;
	r11 = r11 + r13;
	r11 = hl_math_sqrt(r11);
	r2 = r0->roundedDown;
	r13 = (double)r2;
	if( r11 > r13 ) goto label$c8be14a_2_38;
	r12 = false;
	goto label$c8be14a_2_39;
	label$c8be14a_2_38:
	r12 = true;
	label$c8be14a_2_39:
	goto label$c8be14a_2_41;
	label$c8be14a_2_40:
	r12 = false;
	label$c8be14a_2_41:
	if( r12 ) goto label$c8be14a_2_43;
	goto label$c8be14a_2_44;
	label$c8be14a_2_43:
	goto label$c8be14a_2_0;
	label$c8be14a_2_44:
	r14 = r0->image;
	r2 = r0->x;
	r3 = r0->X;
	r2 = r2 + r3;
	r3 = r0->y;
	r15 = r0->Y;
	r3 = r3 + r15;
	r15 = 1;
	if( r14 == NULL ) hl_null_access();
	r16 = r14->length;
	if( ((unsigned)r15) < ((unsigned)r16) ) goto label$c8be14a_2_57;
	r16 = 0;
	goto label$c8be14a_2_60;
	label$c8be14a_2_57:
	r17 = r14->b;
	r16 = 0;
	r16 = *(unsigned short*)(r17 + r16);
	label$c8be14a_2_60:
	r18 = 1;
	r16 = r16 - r18;
	r18 = 8;
	r17 = hl_alloc_bytes(r18);
	r18 = 0;
	r21 = 2;
	r21 = r18 << r21;
	*(int*)(r17 + r21) = r2;
	++r18;
	r20 = 0;
	r21 = 2;
	r21 = r18 << r21;
	*(int*)(r17 + r21) = r20;
	++r18;
	r18 = 2;
	r19 = hl_types_ArrayBase_allocI32(r17,r18);
	if( r19 == NULL ) hl_null_access();
	r18 = 0;
	r20 = r19->length;
	if( ((unsigned)r18) < ((unsigned)r20) ) goto label$c8be14a_2_82;
	r18 = 0;
	goto label$c8be14a_2_86;
	label$c8be14a_2_82:
	r17 = r19->bytes;
	r20 = 2;
	r20 = r18 << r20;
	r18 = *(int*)(r17 + r20);
	label$c8be14a_2_86:
	r20 = 0;
	r21 = r19->length;
	label$c8be14a_2_88:
	if( r20 >= r21 ) goto label$c8be14a_2_112;
	r23 = r20;
	++r20;
	if( r19 == NULL ) hl_null_access();
	r25 = r19->length;
	if( ((unsigned)r23) < ((unsigned)r25) ) goto label$c8be14a_2_97;
	r24 = 0;
	goto label$c8be14a_2_101;
	label$c8be14a_2_97:
	r17 = r19->bytes;
	r25 = 2;
	r25 = r23 << r25;
	r24 = *(int*)(r17 + r25);
	label$c8be14a_2_101:
	if( r18 >= r24 ) goto label$c8be14a_2_111;
	r25 = r19->length;
	if( ((unsigned)r23) < ((unsigned)r25) ) goto label$c8be14a_2_106;
	r24 = 0;
	goto label$c8be14a_2_110;
	label$c8be14a_2_106:
	r17 = r19->bytes;
	r25 = 2;
	r25 = r23 << r25;
	r24 = *(int*)(r17 + r25);
	label$c8be14a_2_110:
	r18 = r24;
	label$c8be14a_2_111:
	goto label$c8be14a_2_88;
	label$c8be14a_2_112:
	r20 = 8;
	r17 = hl_alloc_bytes(r20);
	r20 = 0;
	r23 = 2;
	r23 = r20 << r23;
	*(int*)(r17 + r23) = r18;
	++r20;
	r23 = 2;
	r23 = r20 << r23;
	*(int*)(r17 + r23) = r16;
	++r20;
	r20 = 2;
	r22 = hl_types_ArrayBase_allocI32(r17,r20);
	if( r22 == NULL ) hl_null_access();
	r20 = 0;
	r21 = r22->length;
	if( ((unsigned)r20) < ((unsigned)r21) ) goto label$c8be14a_2_131;
	r20 = 0;
	goto label$c8be14a_2_135;
	label$c8be14a_2_131:
	r17 = r22->bytes;
	r21 = 2;
	r21 = r20 << r21;
	r20 = *(int*)(r17 + r21);
	label$c8be14a_2_135:
	r21 = 0;
	r23 = r22->length;
	label$c8be14a_2_137:
	if( r21 >= r23 ) goto label$c8be14a_2_161;
	r24 = r21;
	++r21;
	if( r22 == NULL ) hl_null_access();
	r27 = r22->length;
	if( ((unsigned)r24) < ((unsigned)r27) ) goto label$c8be14a_2_146;
	r25 = 0;
	goto label$c8be14a_2_150;
	label$c8be14a_2_146:
	r17 = r22->bytes;
	r27 = 2;
	r27 = r24 << r27;
	r25 = *(int*)(r17 + r27);
	label$c8be14a_2_150:
	if( r25 >= r20 ) goto label$c8be14a_2_160;
	r27 = r22->length;
	if( ((unsigned)r24) < ((unsigned)r27) ) goto label$c8be14a_2_155;
	r25 = 0;
	goto label$c8be14a_2_159;
	label$c8be14a_2_155:
	r17 = r22->bytes;
	r27 = 2;
	r27 = r24 << r27;
	r25 = *(int*)(r17 + r27);
	label$c8be14a_2_159:
	r20 = r25;
	label$c8be14a_2_160:
	goto label$c8be14a_2_137;
	label$c8be14a_2_161:
	r21 = r20;
	if( r14 == NULL ) hl_null_access();
	r23 = r14->length;
	r28 = (vision__ds___Image__$Image_Impl_)g$_vision_ds__Image_Image_Impl_;
	r24 = r28->OFFSET;
	r23 = r23 - r24;
	r24 = 1;
	r25 = r14->length;
	if( ((unsigned)r24) < ((unsigned)r25) ) goto label$c8be14a_2_173;
	r25 = 0;
	r24 = r25;
	goto label$c8be14a_2_177;
	label$c8be14a_2_173:
	r17 = r14->b;
	r25 = 0;
	r25 = *(unsigned short*)(r17 + r25);
	r24 = r25;
	label$c8be14a_2_177:
	r5 = (double)r23;
	r27 = 4;
	r25 = r24 * r27;
	r6 = (double)r25;
	r5 = r5 / r6;
	r25 = hl_math_ceil(r5);
	r27 = 1;
	r25 = r25 - r27;
	r27 = 8;
	r17 = hl_alloc_bytes(r27);
	r27 = 0;
	r30 = 2;
	r30 = r27 << r30;
	*(int*)(r17 + r30) = r3;
	++r27;
	r29 = 0;
	r30 = 2;
	r30 = r27 << r30;
	*(int*)(r17 + r30) = r29;
	++r27;
	r27 = 2;
	r26 = hl_types_ArrayBase_allocI32(r17,r27);
	if( r26 == NULL ) hl_null_access();
	r27 = 0;
	r29 = r26->length;
	if( ((unsigned)r27) < ((unsigned)r29) ) goto label$c8be14a_2_205;
	r27 = 0;
	goto label$c8be14a_2_209;
	label$c8be14a_2_205:
	r17 = r26->bytes;
	r29 = 2;
	r29 = r27 << r29;
	r27 = *(int*)(r17 + r29);
	label$c8be14a_2_209:
	r29 = 0;
	r30 = r26->length;
	label$c8be14a_2_211:
	if( r29 >= r30 ) goto label$c8be14a_2_235;
	r32 = r29;
	++r29;
	if( r26 == NULL ) hl_null_access();
	r34 = r26->length;
	if( ((unsigned)r32) < ((unsigned)r34) ) goto label$c8be14a_2_220;
	r33 = 0;
	goto label$c8be14a_2_224;
	label$c8be14a_2_220:
	r17 = r26->bytes;
	r34 = 2;
	r34 = r32 << r34;
	r33 = *(int*)(r17 + r34);
	label$c8be14a_2_224:
	if( r27 >= r33 ) goto label$c8be14a_2_234;
	r34 = r26->length;
	if( ((unsigned)r32) < ((unsigned)r34) ) goto label$c8be14a_2_229;
	r33 = 0;
	goto label$c8be14a_2_233;
	label$c8be14a_2_229:
	r17 = r26->bytes;
	r34 = 2;
	r34 = r32 << r34;
	r33 = *(int*)(r17 + r34);
	label$c8be14a_2_233:
	r27 = r33;
	label$c8be14a_2_234:
	goto label$c8be14a_2_211;
	label$c8be14a_2_235:
	r29 = 8;
	r17 = hl_alloc_bytes(r29);
	r29 = 0;
	r32 = 2;
	r32 = r29 << r32;
	*(int*)(r17 + r32) = r27;
	++r29;
	r32 = 2;
	r32 = r29 << r32;
	*(int*)(r17 + r32) = r25;
	++r29;
	r29 = 2;
	r31 = hl_types_ArrayBase_allocI32(r17,r29);
	if( r31 == NULL ) hl_null_access();
	r29 = 0;
	r30 = r31->length;
	if( ((unsigned)r29) < ((unsigned)r30) ) goto label$c8be14a_2_254;
	r29 = 0;
	goto label$c8be14a_2_258;
	label$c8be14a_2_254:
	r17 = r31->bytes;
	r30 = 2;
	r30 = r29 << r30;
	r29 = *(int*)(r17 + r30);
	label$c8be14a_2_258:
	r30 = 0;
	r32 = r31->length;
	label$c8be14a_2_260:
	if( r30 >= r32 ) goto label$c8be14a_2_284;
	r33 = r30;
	++r30;
	if( r31 == NULL ) hl_null_access();
	r35 = r31->length;
	if( ((unsigned)r33) < ((unsigned)r35) ) goto label$c8be14a_2_269;
	r34 = 0;
	goto label$c8be14a_2_273;
	label$c8be14a_2_269:
	r17 = r31->bytes;
	r35 = 2;
	r35 = r33 << r35;
	r34 = *(int*)(r17 + r35);
	label$c8be14a_2_273:
	if( r34 >= r29 ) goto label$c8be14a_2_283;
	r35 = r31->length;
	if( ((unsigned)r33) < ((unsigned)r35) ) goto label$c8be14a_2_278;
	r34 = 0;
	goto label$c8be14a_2_282;
	label$c8be14a_2_278:
	r17 = r31->bytes;
	r35 = 2;
	r35 = r33 << r35;
	r34 = *(int*)(r17 + r35);
	label$c8be14a_2_282:
	r29 = r34;
	label$c8be14a_2_283:
	goto label$c8be14a_2_260;
	label$c8be14a_2_284:
	r33 = 0;
	if( r21 < r33 ) goto label$c8be14a_2_304;
	r33 = 0;
	if( r29 < r33 ) goto label$c8be14a_2_304;
	r32 = 1;
	if( r14 == NULL ) hl_null_access();
	r33 = r14->length;
	if( ((unsigned)r32) < ((unsigned)r33) ) goto label$c8be14a_2_295;
	r33 = 0;
	r32 = r33;
	goto label$c8be14a_2_299;
	label$c8be14a_2_295:
	r17 = r14->b;
	r33 = 0;
	r33 = *(unsigned short*)(r17 + r33);
	r32 = r33;
	label$c8be14a_2_299:
	if( r21 < r32 ) goto label$c8be14a_2_302;
	r12 = false;
	goto label$c8be14a_2_303;
	label$c8be14a_2_302:
	r12 = true;
	label$c8be14a_2_303:
	goto label$c8be14a_2_305;
	label$c8be14a_2_304:
	r12 = false;
	label$c8be14a_2_305:
	if( !r12 ) goto label$c8be14a_2_332;
	if( r14 == NULL ) hl_null_access();
	r32 = r14->length;
	r28 = (vision__ds___Image__$Image_Impl_)g$_vision_ds__Image_Image_Impl_;
	r33 = r28->OFFSET;
	r32 = r32 - r33;
	r33 = 1;
	r34 = r14->length;
	if( ((unsigned)r33) < ((unsigned)r34) ) goto label$c8be14a_2_317;
	r34 = 0;
	r33 = r34;
	goto label$c8be14a_2_321;
	label$c8be14a_2_317:
	r17 = r14->b;
	r34 = 0;
	r34 = *(unsigned short*)(r17 + r34);
	r33 = r34;
	label$c8be14a_2_321:
	r5 = (double)r32;
	r37 = 4;
	r35 = r33 * r37;
	r6 = (double)r35;
	r5 = r5 / r6;
	r35 = hl_math_ceil(r5);
	if( r29 < r35 ) goto label$c8be14a_2_330;
	r36 = false;
	goto label$c8be14a_2_331;
	label$c8be14a_2_330:
	r36 = true;
	label$c8be14a_2_331:
	goto label$c8be14a_2_333;
	label$c8be14a_2_332:
	r36 = false;
	label$c8be14a_2_333:
	if( r36 ) goto label$c8be14a_2_357;
	r38 = (int)r21;
	r39 = (int)r29;
	r32 = 32;
	r41 = (int)r32;
	r40 = r38 << r41;
	r43 = (haxe___Int64__$Int64_Impl_)g$_haxe__Int64_Int64_Impl_;
	r42 = r43->MASK;
	r41 = r39 & r42;
	r40 = r40 | r41;
	r44 = (vision__exceptions__OutOfBounds)hl_alloc_obj(&t$vision_exceptions_OutOfBounds);
	r45 = (vision__ds__Point2D)hl_alloc_obj(&t$vision_ds_Point2D);
	r32 = 32;
	r42 = (int)r32;
	r41 = r40 >> r42;
	r32 = (int)r41;
	r5 = (double)r32;
	r46 = &r5;
	r32 = (int)r40;
	r6 = (double)r32;
	r47 = &r6;
	vision_ds_Point2D_new(r45,r46,r47);
	vision_exceptions_OutOfBounds_new(r44,r14,r45);
	hl_throw((vdynamic*)r44);
	label$c8be14a_2_357:
	r32 = 1;
	if( r14 == NULL ) hl_null_access();
	r33 = r14->length;
	if( ((unsigned)r32) < ((unsigned)r33) ) goto label$c8be14a_2_364;
	r33 = 0;
	r32 = r33;
	goto label$c8be14a_2_368;
	label$c8be14a_2_364:
	r17 = r14->b;
	r33 = 0;
	r33 = *(unsigned short*)(r17 + r33);
	r32 = r33;
	label$c8be14a_2_368:
	r33 = r29 * r32;
	r33 = r33 + r21;
	r34 = 4;
	r33 = r33 * r34;
	r28 = (vision__ds___Image__$Image_Impl_)g$_vision_ds__Image_Image_Impl_;
	r35 = r28->OFFSET;
	r34 = r33 + r35;
	r33 = r34;
	r34 = haxe_io_Bytes_get(r14,r34);
	r35 = 24;
	r34 = r34 << r35;
	r37 = 1;
	r35 = r33 + r37;
	r35 = haxe_io_Bytes_get(r14,r35);
	r37 = 16;
	r35 = r35 << r37;
	r34 = r34 | r35;
	r37 = 2;
	r35 = r33 + r37;
	r35 = haxe_io_Bytes_get(r14,r35);
	r37 = 8;
	r35 = r35 << r37;
	r34 = r34 | r35;
	r37 = 3;
	r35 = r33 + r37;
	r35 = haxe_io_Bytes_get(r14,r35);
	r34 = r34 | r35;
	return r34;
}

bool vision_tools__ImageTools_NeighborsIterator_hasNext(vision__tools___ImageTools__NeighborsIterator r0) {
	bool r3;
	int r1, r2;
	r1 = r0->X;
	r2 = r0->roundedDown;
	if( r2 < r1 ) goto label$c8be14a_3_10;
	r1 = r0->Y;
	r2 = r0->roundedDown;
	if( r1 <= r2 ) goto label$c8be14a_3_8;
	r3 = false;
	goto label$c8be14a_3_9;
	label$c8be14a_3_8:
	r3 = true;
	label$c8be14a_3_9:
	return r3;
	label$c8be14a_3_10:
	r3 = false;
	return r3;
}

