// Generated by HLC 4.3.4 (HL v5)
#define HLC_BOOT
#include <hlc.h>
#include <vision/ds/_Image/PixelIterator.h>
#include <vision/ds/_Image/Image_Impl_.h>
#include <haxe/_Int64/Int64_Impl_.h>
#include <vision/exceptions/OutOfBounds.h>
#include <vision/ds/Point2D.h>
#include <vision/ds/Pixel.h>
#include <hl/natives.h>
extern vision__ds___Image__$Image_Impl_ g$_vision_ds__Image_Image_Impl_;
extern haxe___Int64__$Int64_Impl_ g$_haxe__Int64_Int64_Impl_;
extern hl_type t$vision_exceptions_OutOfBounds;
extern hl_type t$vision_ds_Point2D;
void vision_ds_Point2D_new(vision__ds__Point2D,double*,double*);
void vision_exceptions_OutOfBounds_new(vision__exceptions__OutOfBounds,haxe__io__Bytes,vision__ds__Point2D);
extern hl_type t$vision_ds_Pixel;
int haxe_io_Bytes_get(haxe__io__Bytes,int);
void vision_ds_Pixel_new(vision__ds__Pixel,int,int,int);

vision__ds__Pixel vision_ds__Image_PixelIterator_next(vision__ds___Image__PixelIterator r0) {
	vision__ds___Image__$Image_Impl_ r18;
	vision__ds__Point2D r29;
	int64 r22, r23, r24, r25, r26;
	bool r16, r19;
	haxe__io__Bytes r3, r6, r11;
	haxe___Int64__$Int64_Impl_ r27;
	vision__ds__Pixel r32;
	vision__exceptions__OutOfBounds r28;
	double r12, r13;
	double *r30, *r31;
	vbyte *r7;
	int r1, r4, r5, r8, r9, r10, r14, r15, r17, r20, r21, r33, r34;
	r1 = r0->i;
	r3 = r0->img;
	r4 = 1;
	if( r3 == NULL ) hl_null_access();
	r5 = r3->length;
	if( ((unsigned)r4) < ((unsigned)r5) ) goto label$1d78849_1_9;
	r5 = 0;
	r4 = r5;
	goto label$1d78849_1_13;
	label$1d78849_1_9:
	r7 = r3->b;
	r5 = 0;
	r5 = *(unsigned short*)(r7 + r5);
	r4 = r5;
	label$1d78849_1_13:
	r5 = r4 == 0 ? 0 : r1 % r4;
	r8 = r0->i;
	r6 = r0->img;
	r9 = 1;
	if( r6 == NULL ) hl_null_access();
	r10 = r6->length;
	if( ((unsigned)r9) < ((unsigned)r10) ) goto label$1d78849_1_23;
	r10 = 0;
	r9 = r10;
	goto label$1d78849_1_27;
	label$1d78849_1_23:
	r7 = r6->b;
	r10 = 0;
	r10 = *(unsigned short*)(r7 + r10);
	r9 = r10;
	label$1d78849_1_27:
	r12 = (double)r8;
	r13 = (double)r9;
	r12 = r12 / r13;
	r10 = hl_math_floor(r12);
	r11 = r0->img;
	r15 = 0;
	if( r5 < r15 ) goto label$1d78849_1_52;
	r15 = 0;
	if( r10 < r15 ) goto label$1d78849_1_52;
	r14 = 1;
	if( r11 == NULL ) hl_null_access();
	r15 = r11->length;
	if( ((unsigned)r14) < ((unsigned)r15) ) goto label$1d78849_1_43;
	r15 = 0;
	r14 = r15;
	goto label$1d78849_1_47;
	label$1d78849_1_43:
	r7 = r11->b;
	r15 = 0;
	r15 = *(unsigned short*)(r7 + r15);
	r14 = r15;
	label$1d78849_1_47:
	if( r5 < r14 ) goto label$1d78849_1_50;
	r16 = false;
	goto label$1d78849_1_51;
	label$1d78849_1_50:
	r16 = true;
	label$1d78849_1_51:
	goto label$1d78849_1_53;
	label$1d78849_1_52:
	r16 = false;
	label$1d78849_1_53:
	if( !r16 ) goto label$1d78849_1_80;
	if( r11 == NULL ) hl_null_access();
	r14 = r11->length;
	r18 = (vision__ds___Image__$Image_Impl_)g$_vision_ds__Image_Image_Impl_;
	r15 = r18->OFFSET;
	r14 = r14 - r15;
	r15 = 1;
	r17 = r11->length;
	if( ((unsigned)r15) < ((unsigned)r17) ) goto label$1d78849_1_65;
	r17 = 0;
	r15 = r17;
	goto label$1d78849_1_69;
	label$1d78849_1_65:
	r7 = r11->b;
	r17 = 0;
	r17 = *(unsigned short*)(r7 + r17);
	r15 = r17;
	label$1d78849_1_69:
	r12 = (double)r14;
	r21 = 4;
	r20 = r15 * r21;
	r13 = (double)r20;
	r12 = r12 / r13;
	r20 = hl_math_ceil(r12);
	if( r10 < r20 ) goto label$1d78849_1_78;
	r19 = false;
	goto label$1d78849_1_79;
	label$1d78849_1_78:
	r19 = true;
	label$1d78849_1_79:
	goto label$1d78849_1_81;
	label$1d78849_1_80:
	r19 = false;
	label$1d78849_1_81:
	if( r19 ) goto label$1d78849_1_105;
	r22 = (int)r5;
	r23 = (int)r10;
	r14 = 32;
	r25 = (int)r14;
	r24 = r22 << r25;
	r27 = (haxe___Int64__$Int64_Impl_)g$_haxe__Int64_Int64_Impl_;
	r26 = r27->MASK;
	r25 = r23 & r26;
	r24 = r24 | r25;
	r28 = (vision__exceptions__OutOfBounds)hl_alloc_obj(&t$vision_exceptions_OutOfBounds);
	r29 = (vision__ds__Point2D)hl_alloc_obj(&t$vision_ds_Point2D);
	r14 = 32;
	r26 = (int)r14;
	r25 = r24 >> r26;
	r14 = (int)r25;
	r12 = (double)r14;
	r30 = &r12;
	r14 = (int)r24;
	r13 = (double)r14;
	r31 = &r13;
	vision_ds_Point2D_new(r29,r30,r31);
	vision_exceptions_OutOfBounds_new(r28,r11,r29);
	hl_throw((vdynamic*)r28);
	label$1d78849_1_105:
	r14 = 1;
	if( r11 == NULL ) hl_null_access();
	r15 = r11->length;
	if( ((unsigned)r14) < ((unsigned)r15) ) goto label$1d78849_1_112;
	r15 = 0;
	r14 = r15;
	goto label$1d78849_1_116;
	label$1d78849_1_112:
	r7 = r11->b;
	r15 = 0;
	r15 = *(unsigned short*)(r7 + r15);
	r14 = r15;
	label$1d78849_1_116:
	r15 = r10 * r14;
	r15 = r15 + r5;
	r17 = 4;
	r15 = r15 * r17;
	r18 = (vision__ds___Image__$Image_Impl_)g$_vision_ds__Image_Image_Impl_;
	r20 = r18->OFFSET;
	r17 = r15 + r20;
	r15 = r17;
	r32 = (vision__ds__Pixel)hl_alloc_obj(&t$vision_ds_Pixel);
	r21 = haxe_io_Bytes_get(r11,r15);
	r33 = 24;
	r21 = r21 << r33;
	r34 = 1;
	r33 = r15 + r34;
	r33 = haxe_io_Bytes_get(r11,r33);
	r34 = 16;
	r33 = r33 << r34;
	r21 = r21 | r33;
	r34 = 2;
	r33 = r15 + r34;
	r33 = haxe_io_Bytes_get(r11,r33);
	r34 = 8;
	r33 = r33 << r34;
	r21 = r21 | r33;
	r34 = 3;
	r33 = r15 + r34;
	r33 = haxe_io_Bytes_get(r11,r33);
	r21 = r21 | r33;
	vision_ds_Pixel_new(r32,r5,r10,r21);
	r17 = r0->i;
	r20 = 4;
	r17 = r17 + r20;
	r0->i = r17;
	return r32;
}

bool vision_ds__Image_PixelIterator_hasNext(vision__ds___Image__PixelIterator r0) {
	haxe__io__Bytes r4;
	bool r1;
	int r2, r3;
	r2 = r0->i;
	r4 = r0->img;
	if( r4 == NULL ) hl_null_access();
	r3 = r4->length;
	if( r2 < r3 ) goto label$1d78849_2_7;
	r1 = false;
	goto label$1d78849_2_8;
	label$1d78849_2_7:
	r1 = true;
	label$1d78849_2_8:
	return r1;
}

void vision_ds__Image_PixelIterator_new(vision__ds___Image__PixelIterator r0,haxe__io__Bytes r1) {
	int r2;
	r2 = 4;
	r0->i = r2;
	r0->img = r1;
	return;
}

